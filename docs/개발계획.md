# Plot Weaver MVP 개발 계획 (순수 HTML/JS/CSS)

## 📋 프로젝트 개요
**Plot Weaver**: Git 워크플로우를 소설 창작에 도입한 순수 웹 애플리케이션
- **순수 웹 기술**: HTML, JavaScript, CSS만 사용
- **LocalStorage 기반**: 모든 데이터를 브라우저에 저장
- **백스토리 기능 포함**: 오프스크린 이벤트 관리

## 🏗️ 기술 스택 및 구조

### 기술 스택
- **HTML5**: 시맨틱 마크업
- **Vanilla JavaScript (ES6+)**: 함수형 프로그래밍 지향
- **CSS3**: Flexbox/Grid 기반 레이아웃, CSS 변수 활용
- **LocalStorage API**: 데이터 영속성

### 파일 구조
```
root/
├── index.html              # 메인 HTML 파일
├── css/
│   ├── main.css            # 메인 스타일
│   ├── layout.css          # 레이아웃 관련
│   └── components.css      # 컴포넌트 스타일
├── js/
│   ├── app.js              # 메인 애플리케이션
│   ├── git-system.js       # Git 워크플로우 로직
│   ├── file-manager.js     # 파일 시스템 관리
│   ├── backstory.js        # 백스토리 기능
│   ├── storage.js          # LocalStorage 관리
│   └── utils.js            # 유틸리티 함수
└── README.md
```

## 📅 개발 스프린트 계획

### Sprint 0: 기본 구조 (2일)
- **HTML 구조 설계**: 3-panel 레이아웃 마크업
- **CSS 기본 스타일**: 레이아웃, 색상 체계, 반응형 구조
- **JavaScript 모듈 구조**: ES6 모듈 시스템으로 코드 분리

### Sprint 1: 파일 시스템 (3일)
- **파일 트리 UI**: 폴더/파일 계층 구조 표시
- **파일 CRUD**: 생성, 읽기, 수정, 삭제 기능
- **텍스트 에디터**: textarea 기반 마크다운 에디터
- **LocalStorage 스키마**: 파일 데이터 저장 구조

### Sprint 2: Git 워크플로우 (4일)
- **커밋 시스템**: 변경사항 스냅샷 저장
- **브랜치 관리**: 생성, 전환, 목록 표시
- **히스토리 뷰**: 커밋 목록 및 시간순 표시
- **체크아웃**: 특정 버전으로 되돌리기

### Sprint 3: 백스토리 기능 (3일)
- **이벤트 관리**: 백스토리 이벤트 CRUD
- **타임라인 UI**: 시간순 이벤트 표시
- **연결 시스템**: 메인 스토리와 백스토리 연결
- **필터링**: 이벤트 검색 및 분류

### Sprint 4: UI/UX 완성 (2일)
- **인터랙션 개선**: 애니메이션, 트랜지션
- **반응형 디자인**: 모바일 대응
- **접근성**: 키보드 네비게이션, ARIA 속성

## 🎨 UI 구조 및 컴포넌트

### HTML 기본 구조
```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Plot Weaver</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="app-container">
        <!-- 헤더 -->
        <header class="app-header">
            <h1>Plot Weaver</h1>
            <div class="project-selector"></div>
        </header>
        
        <!-- 메인 워크스페이스 -->
        <main class="workspace">
            <!-- 왼쪽 패널 -->
            <aside class="left-panel">
                <div class="file-tree"></div>
                <div class="branch-selector"></div>
            </aside>
            
            <!-- 중앙 패널 -->
            <section class="center-panel">
                <div class="editor-container">
                    <textarea class="text-editor"></textarea>
                </div>
            </section>
            
            <!-- 오른쪽 패널 -->
            <aside class="right-panel">
                <div class="git-panel">
                    <div class="commit-history"></div>
                    <div class="commit-stage"></div>
                </div>
                <div class="backstory-panel">
                    <div class="timeline-view"></div>
                    <div class="event-form"></div>
                </div>
            </aside>
        </main>
    </div>
    
    <script type="module" src="js/app.js"></script>
</body>
</html>
```

## 💾 데이터 구조 (LocalStorage)

### JavaScript 데이터 모델
```javascript
// 전체 애플리케이션 상태
const AppState = {
    currentProject: null,
    projects: []
};

// 프로젝트 구조
const Project = {
    id: 'uuid',
    name: 'string',
    currentBranch: 'string',
    branches: [Branch],
    files: [FileNode],
    backstory: [BackstoryEvent],
    createdAt: 'timestamp'
};

// 브랜치 구조
const Branch = {
    id: 'uuid',
    name: 'string',
    commits: [Commit],
    parentCommitId: 'uuid|null'
};

// 커밋 구조
const Commit = {
    id: 'uuid',
    message: 'string',
    timestamp: 'number',
    fileSnapshots: {}, // { filePath: content }
    author: 'string'
};

// 백스토리 이벤트
const BackstoryEvent = {
    id: 'uuid',
    title: 'string',
    content: 'string',
    date: 'string',
    characters: ['string'],
    location: 'string',
    tags: ['string'],
    connectionPoints: ['string'] // 연결되는 메인 스토리 지점
};
```

## 🔧 핵심 기능 구현

### 1. 함수형 프로그래밍 패턴
```javascript
// 순수 함수 기반 상태 관리
const createCommit = (files, message) => ({
    id: generateUUID(),
    message,
    timestamp: Date.now(),
    fileSnapshots: { ...files }
});

const addCommitToBranch = (branch, commit) => ({
    ...branch,
    commits: [...branch.commits, commit]
});

// 함수 합성
const commitChanges = (project, files, message) =>
    pipe(
        proj => proj.branches.find(b => b.id === proj.currentBranch),
        branch => addCommitToBranch(branch, createCommit(files, message)),
        newBranch => updateBranchInProject(project, newBranch)
    )(project);
```

### 2. Git 워크플로우 핵심 로직
- **브랜치 생성**: 현재 커밋에서 새 브랜치 분기
- **커밋**: 현재 파일 상태의 스냅샷 생성
- **체크아웃**: 특정 커밋의 파일 상태로 복원
- **히스토리**: 시간순 커밋 목록 표시

### 3. 백스토리 시스템
- **이벤트 타임라인**: 날짜순 정렬된 백스토리 이벤트
- **연결점 관리**: 메인 스토리의 특정 지점과 백스토리 연결
- **태그 시스템**: 이벤트 분류 및 검색

### 4. LocalStorage 관리
```javascript
// 데이터 저장/로드
const saveProject = (project) => {
    localStorage.setItem(`project_${project.id}`, JSON.stringify(project));
};

const loadProject = (projectId) => {
    const data = localStorage.getItem(`project_${projectId}`);
    return data ? JSON.parse(data) : null;
};

// 자동 저장
const autoSave = debounce((project) => {
    saveProject(project);
}, 1000);
```

## 🎯 MVP 완성 기준

### 필수 기능
1. ✅ 프로젝트 생성 및 관리
2. ✅ 파일/폴더 생성, 편집, 삭제
3. ✅ 브랜치 생성 및 전환
4. ✅ 커밋 생성 및 히스토리 조회
5. ✅ 특정 커밋으로 되돌리기
6. ✅ 백스토리 이벤트 관리
7. ✅ 타임라인 뷰
8. ✅ LocalStorage 자동 저장

### 품질 기준
- 모든 기능이 순수 웹 기술로 구현
- 반응형 디자인 (모바일 대응)
- 브라우저 새로고침 후에도 데이터 유지
- 직관적인 사용자 인터페이스

이 계획은 프레임워크 없이도 강력한 Git 기반 창작 도구를 만드는 것을 목표로 하며, 함수형 프로그래밍 원칙을 바닐라 JavaScript로 구현합니다.